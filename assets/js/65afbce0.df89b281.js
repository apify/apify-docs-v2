"use strict";(self.webpackChunkapify_docs_v2=self.webpackChunkapify_docs_v2||[]).push([[1566],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),h=p(n),u=r,m=h["".concat(l,".").concat(u)]||h[u]||d[u]||o;return n?a.createElement(m,i(i({ref:t},c),{},{components:n})):a.createElement(m,i({ref:t},c))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},10805:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>p,toc:()=>d});var a=n(87462),r=n(63366),o=(n(67294),n(3905)),i=["components"],s={title:"Node.js scraper - I",description:"Learn how to use JavaScript and Node.js to create a web scraper, plus take advantage of the cheerio and got-scraping libraries to make your job easier.",sidebar_position:6,slug:"/web-scraping-for-beginners/data-collection/node-js-scraper"},l="First Node.js scraper",p={unversionedId:"webscraping/web_scraping_for_beginners/data_extraction/node_js_scraper",id:"webscraping/web_scraping_for_beginners/data_extraction/node_js_scraper",title:"Node.js scraper - I",description:"Learn how to use JavaScript and Node.js to create a web scraper, plus take advantage of the cheerio and got-scraping libraries to make your job easier.",source:"@site/sources/academy/webscraping/web_scraping_for_beginners/data_extraction/node_js_scraper.md",sourceDirName:"webscraping/web_scraping_for_beginners/data_extraction",slug:"/web-scraping-for-beginners/data-collection/node-js-scraper",permalink:"/academy/web-scraping-for-beginners/data-collection/node-js-scraper",draft:!1,editUrl:"https://github.com/apify/apify-docs-v2/edit/master/sources/academy/webscraping/web_scraping_for_beginners/data_extraction/node_js_scraper.md",tags:[],version:"current",lastUpdatedBy:"Jan \u010curn",lastUpdatedAt:1677248878,formattedLastUpdatedAt:"Feb 24, 2023",sidebarPosition:6,frontMatter:{title:"Node.js scraper - I",description:"Learn how to use JavaScript and Node.js to create a web scraper, plus take advantage of the cheerio and got-scraping libraries to make your job easier.",sidebar_position:6,slug:"/web-scraping-for-beginners/data-collection/node-js-scraper"},sidebar:"academy",previous:{title:"Project setup",permalink:"/academy/web-scraping-for-beginners/data-collection/project-setup"},next:{title:"Node.js scraper - II",permalink:"/academy/web-scraping-for-beginners/data-collection/node-continued"}},c={},d=[{value:"Downloading HTML",id:"downloading-html",level:2},{value:"Parsing HTML",id:"parsing-html",level:2},{value:"Next up",id:"next",level:2}],h={toc:d};function u(e){var t=e.components,s=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},h,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"first-scraper"},"First Node.js scraper"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Learn how to use JavaScript and Node.js to create a web scraper, plus take advantage of the cheerio and got-scraping libraries to make your job easier.")),(0,o.kt)("hr",null),(0,o.kt)("p",null,"Finally, we have everything ready to start scraping! Yes, the setup was a bit daunting, but luckily, you only have to do it once. We have our project, we have our ",(0,o.kt)("strong",{parentName:"p"},"main.js")," file, so let's add some code to it."),(0,o.kt)("h2",{id:"downloading-html"},"Downloading HTML"),(0,o.kt)("p",null,"We will use the ",(0,o.kt)("inlineCode",{parentName:"p"},"got-scraping")," library to download the HTML of products that are ",(0,o.kt)("a",{parentName:"p",href:"https://warehouse-theme-metal.myshopify.com/collections/sales",target:"_blank",rel:"noopener"},"on sale in the Warehouse store"),". We already worked with this page earlier in the ",(0,o.kt)("a",{parentName:"p",href:"/academy/web-scraping-for-beginners/data-collection/using-devtools",target:null,rel:null},"Extracting Data with DevTools")," lessons."),(0,o.kt)("p",null,"Replace the contents of your ",(0,o.kt)("strong",{parentName:"p"},"main.js")," file with this code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// main.js\nimport { gotScraping } from 'got-scraping';\n\nconst storeUrl = 'https://warehouse-theme-metal.myshopify.com/collections/sales';\n\nconst response = await gotScraping(storeUrl);\nconst html = response.body;\nconsole.log(html);\n")),(0,o.kt)("p",null,"Now run the script using the ",(0,o.kt)("inlineCode",{parentName:"p"},"node main.js")," command from previous lesson. After a brief moment, you should see the page's HTML printed to your terminal."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"gotScraping")," is an ",(0,o.kt)("inlineCode",{parentName:"p"},"async")," function and the ",(0,o.kt)("inlineCode",{parentName:"p"},"await")," keyword is used to pause execution of the script until it returns the ",(0,o.kt)("inlineCode",{parentName:"p"},"response"),". ",(0,o.kt)("a",{parentName:"p",href:"https://javascript.info/async-await",target:"_blank",rel:"noopener"},"Learn more about ",(0,o.kt)("inlineCode",{parentName:"a"},"async")," and ",(0,o.kt)("inlineCode",{parentName:"a"},"await")))),(0,o.kt)("h2",{id:"parsing-html"},"Parsing HTML"),(0,o.kt)("p",null,"Having the HTML printed to the terminal is not very helpful. To extract the data, we first have to parse it. Parsing the HTML allows us to query the individual HTML elements, similarly to the way we did it in browser in the ",(0,o.kt)("a",{parentName:"p",href:"/academy/web-scraping-for-beginners/data-collection/using-devtools",target:null,rel:null},"Extracting Data with DevTools")," lessons."),(0,o.kt)("p",null,"To parse the HTML with the ",(0,o.kt)("inlineCode",{parentName:"p"},"cheerio")," library. Replace the code in your ",(0,o.kt)("strong",{parentName:"p"},"main.js")," with the following code:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// main.js\nimport { gotScraping } from 'got-scraping';\nimport cheerio from 'cheerio';\n\nconst storeUrl = 'https://warehouse-theme-metal.myshopify.com/collections/sales';\n\n// Download HTML with Got Scraping\nconst response = await gotScraping(storeUrl);\nconst html = response.body;\n\n// Parse HTML with Cheerio\nconst $ = cheerio.load(html);\nconst headingElement = $('h1');\nconst headingText = headingElement.text();\n\n// Print page title to terminal\nconsole.log(headingText);\n")),(0,o.kt)("p",null,"When you run the above script, ",(0,o.kt)("strong",{parentName:"p"},"Sales")," will be printed to the terminal. That's because it's the heading of the Sales page of the Warehouse Store which is located in a ",(0,o.kt)("inlineCode",{parentName:"p"},"h1")," element."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Scraping page heading",src:n(7137).Z,width:"3258",height:"1986"})),(0,o.kt)("p",null,"Great, we successfully parsed the HTML and extracted the text of the ",(0,o.kt)("inlineCode",{parentName:"p"},"<h1>")," element from it using Node.js and Cheerio. Let's break the code down."),(0,o.kt)("p",null,"The script first downloaded the page's HTML using the Got Scraping library. Then, it parsed the downloaded ",(0,o.kt)("inlineCode",{parentName:"p"},"html")," with ",(0,o.kt)("inlineCode",{parentName:"p"},"cheerio")," using the ",(0,o.kt)("inlineCode",{parentName:"p"},"load()")," function, and allowed us to work with it using the ",(0,o.kt)("inlineCode",{parentName:"p"},"$")," variable (the ",(0,o.kt)("inlineCode",{parentName:"p"},"$")," name is an old convention). The next ",(0,o.kt)("inlineCode",{parentName:"p"},"$('h1')")," function call looked inside the parsed HTML and found the ",(0,o.kt)("inlineCode",{parentName:"p"},"<h1>")," element. Finally, the script extracted the text from the element using the ",(0,o.kt)("inlineCode",{parentName:"p"},".text()")," function and printed it to the terminal with ",(0,o.kt)("inlineCode",{parentName:"p"},"console.log()"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},(0,o.kt)("inlineCode",{parentName:"p"},"$('h1')")," is very similar to calling ",(0,o.kt)("inlineCode",{parentName:"p"},"document.querySelector('h1')")," in the browser and ",(0,o.kt)("inlineCode",{parentName:"p"},"element.text()")," is similar to ",(0,o.kt)("inlineCode",{parentName:"p"},"element.textContent")," from the earlier DevTools lessons. ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/cheeriojs/cheerio#readme",target:"_blank",rel:"noopener"},"Visit the cheerio documentation")," to learn more about its syntax.")),(0,o.kt)("h2",{id:"next"},"Next up"),(0,o.kt)("p",null,"In the ",(0,o.kt)("a",{parentName:"p",href:"/academy/web-scraping-for-beginners/data-collection/node-continued",target:null,rel:null},"next lesson")," we will learn more about Cheerio and use it to extract all the products' data from Fakestore."))}u.isMDXComponent=!0},7137:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/node-scraper-title-be9c173ce57d6c4af63aec0ed0c9bcdd.png"}}]);